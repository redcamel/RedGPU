# RedGPU Shadow System Roadmap (Unreal-Grade Shadows)

본 문서는 RedGPU의 그림자 시스템을 언리얼 엔진의 정교함과 성능 수준으로 끌어올리기 위한 기술 로드맵 및 상세 전략을 정의합니다.

---

## 🎯 전략적 우선순위 및 난이도 분석
공간의 깊이감을 결정짓는 핵심 그림자 기술들의 개발 순위입니다.

| 우선순위 | 기능 명칭 | 임팩트 | 난이도 | 부하 정도 | 핵심 가치 |
| :--- | :--- | :---: | :---: | :---: | :--- |
| **1순위** | **CSM (Cascaded Shadows)** | 🔴 최고 | 🟠 높음 | 🟡 보통 | 야외 지형에서 원거리와 근거리 그림자 품질을 동시에 확보 |
| **2순위** | **Contact Shadows** | 🟠 높음 | 🟡 보통 | 🟡 보통 | 아주 미세한 틈새 음영을 보강하여 물체의 부유 현상 제거 |
| **3순위** | **Soft Shadows (PCF/PCSS)** | 🟠 높음 | 🟡 보통 | 🟢 낮음 | 광원 크기에 따른 자연스러운 반그림자(Penumbra) 구현 |
| **4순위** | **Distance Field Shadows** | 🟡 보통 | 🟡 보통 | 🟡 보통 | SDF 데이터를 활용하여 원거리에서도 칼 같은 선명도 유지 |
| **5위** | **VSM (Virtual Shadow Maps)** | 🟠 높음 | 🔴 최고 | 🟠 높음 | 고해상도 지오메트리에 최적화된 차세대 가상화 그림자 시스템 |

---

## 🟢 Phase 1: 기본 인프라 고도화 (Foundation)
현재의 단일 쉐도우 맵 방식을 넘어 표준적인 하이엔드 그림자 구조를 구축합니다.

### 1. CSM (Cascaded Shadow Maps)
- **개념:** 카메라 시야(Frustum)를 거리별로 여러 구역(Cascade)으로 나누어 각각 다른 해상도의 쉐도우 맵을 할당.
- **전략:**
  - 4단계 이상의 Cascade 분할 로직 구현.
  - Cascade 간의 경계를 부드럽게 섞어주는 블렌딩(Transition) 기술 적용.
  - 쉐도우 맵 텍스처 아틀라스(Atlas) 관리 시스템 구축.

### 2. 고품질 필터링 (Soft Shadows)
- **개념:** 그림자 경계를 물리적으로 부드럽게 처리.
- **전략:**
  - **PCF (Percentage Closer Filtering)**: 샘플링 횟수 최적화 및 고정밀 필터링.
  - **PCSS (Percentage Closer Soft Shadows)**: 차폐물과의 거리에 따라 그림자가 점점 흐려지는 효과 연구.

---

## 🟡 Phase 2: 디테일 및 정밀도 보강 (Precision)
그림자의 미세한 오차를 잡아내고 현실감을 극대화합니다.

### 1. Contact Shadows (Screen Space Shadows)
- **개념:** 그림자 맵의 해상도 한계로 표현 못 하는 아주 미세한 틈새를 화면 공간에서 직접 연산.
- **전략:**
  - 깊이 버퍼를 이용한 짧은 거리의 레이 트레이싱(Ray-marching) 구현.
  - 하드웨어 쉐도우 맵과 자연스럽게 합성되는 마스킹 로직 적용.

### 2. Distance Field Shadows (SDF Shadows)
- **개념:** 미리 계산된 거리 필드(SDF) 데이터를 사용하여 그림자 판정.
- **전략:**
  - 메시별 SDF 볼륨 텍스처 생성기 및 런타임 샘플링 로직 구축.
  - 성능 효율이 매우 높아 다수의 동적 객체가 있는 환경에서 유용.

---

## 🔴 Phase 3: 차세대 가상화 기술 (Future Tech)
웹GPU의 성능을 극한으로 활용하는 도전적인 기술입니다.

### 1. VSM (Virtual Shadow Maps) 연구
- **개념:** 쉐도우 맵을 가상화하여 수만 장의 텍스처가 있는 것처럼 정밀하게 관리하는 언리얼 5의 핵심 기술.
- **전략:**
  - 클러스터 기반 페이지 관리 및 동적 업데이트 시스템 연구.
  - 고해상도 나나이트(Nanite)급 지오메트리에 대응하는 차세대 그림자 구조 설계.

---

## 📊 그림자 시스템 구현 수준 및 부하 비교 (UE5 vs RedGPU)

| 기능 명칭 | 현재 수준 (RedGPU) | 부하 정도 | UE5 대비 | 향후 과제 |
| :--- | :--- | :---: | :---: | :--- |
| **Directional Shadow** | 단일 쉐도우 맵 방식 | 🟡 보통 | 60% | CSM 도입으로 원거리 품질 확보 필수 |
| **Point/Spot Shadow** | 지원 예정 | 🟠 높음 | 0% | 다중 광원 그림자 시스템 구축 필요 |
| **Contact Shadows** | 없음 | 🟡 보통 | 0% | 화면 공간 보조 그림자 패스 신설 |
| **Shadow Filtering** | 기본 PCF 적용됨 | 🟢 낮음 | 70% | PCSS 등 가변적인 소프트 쉐도우 고도화 |
| **SDF Shadows** | 없음 | 🟡 보통 | 0% | SDF 생성 및 레이마칭 인프라 구축 |

**종합 평가:** 현재 약 **25%** 구현 완료. 하이엔드 엔진으로 가기 위해 가장 많은 투자가 필요한 분야입니다.

---
**최종 업데이트:** 2026년 2월 10일
**대상 버전:** RedGPU V4.1.0+
